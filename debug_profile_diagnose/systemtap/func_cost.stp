#!/usr/bin/stap

// @see https://www.cnblogs.com/cobbliu/articles/9394349.html
global sends

probe process("application_path").function("runtime.findfunc").return {
  sends <<< gettimeofday_us() - @entry(gettimeofday_us()) # 以微秒精度来统计，entry方法将一个表达式放置于函数入口处
}

probe timer.s(10) {
  print(@hist_log(sends))
}